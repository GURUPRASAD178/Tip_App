{% extends 'base.html' %}
{% load static %}

{% block title %}{{ restaurant.name }} - Digital Tipping | TipEase{% endblock %}

{% block extra_css %}
<style>
    .restaurant-header {
        background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=2074&q=80');
        background-size: cover;
        background-position: center;
        color: white;
        padding: 80px 0;
        position: relative;
    }

    .restaurant-logo {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 5px solid white;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        margin-bottom: 20px;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: var(--primary-color);
    }

    .restaurant-info {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 30px;
        margin-top: 30px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .waiter-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-top: 50px;
    }

    .waiter-card {
        background: white;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .waiter-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--gradient-primary);
    }

    .waiter-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }

    .waiter-photo {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        margin: 0 auto 20px;
        background-size: cover;
        background-position: center;
        border: 4px solid #f8f9fa;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .waiter-name {
        font-size: 1.3rem;
        font-weight: bold;
        color: var(--primary-color);
        margin-bottom: 5px;
    }

    .waiter-role {
        color: #6c757d;
        margin-bottom: 15px;
        font-style: italic;
    }

    .waiter-rating {
        margin-bottom: 20px;
    }

    .rating-stars {
        color: #ffc107;
        font-size: 1.1rem;
    }

    .tip-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 15px;
    }

    .tip-btn {
        background: linear-gradient(45deg, #28a745, #20c997);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 600;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }

    .tip-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        color: white;
    }

    .custom-tip-btn {
        background: linear-gradient(45deg, #007bff, #6f42c1);
    }

    .custom-tip-btn:hover {
        box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
    }

    .waiter-stats {
        display: flex;
        justify-content: space-around;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #e9ecef;
    }

    .stat-item {
        text-align: center;
    }

    .stat-number {
        font-weight: bold;
        color: var(--primary-color);
        font-size: 1.1rem;
    }

    .stat-label {
        font-size: 0.8rem;
        color: #6c757d;
    }

    .search-filter {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
    }

    .restaurant-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.2);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        backdrop-filter: blur(5px);
    }

    .stat-icon {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .no-waiters {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .no-waiters i {
        font-size: 4rem;
        color: #dee2e6;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<!-- Restaurant Header -->
<section class="restaurant-header">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="text-center text-lg-start">
                    <div class="restaurant-logo mx-auto mx-lg-0">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h1 class="display-4 fw-bold mb-3">{{ restaurant.name|default:"The Golden Spoon Restaurant" }}</h1>
                    <p class="lead mb-4">{{ restaurant.description|default:"Experience fine dining with exceptional
                        service. Our dedicated staff is here to make your visit memorable." }}</p>

                    <div class="d-flex flex-wrap gap-3 justify-content-center justify-content-lg-start">
                        <span class="badge bg-success fs-6 px-3 py-2">
                            <i class="fas fa-star me-1"></i>{{ restaurant.rating|default:"4.8" }} Rating
                        </span>
                        <span class="badge bg-info fs-6 px-3 py-2">
                            <i class="fas fa-users me-1"></i>{{ waiters|length|default:"12" }} Staff Members
                        </span>
                        <span class="badge bg-warning fs-6 px-3 py-2">
                            <i class="fas fa-map-marker-alt me-1"></i>{{ restaurant.location|default:"Downtown" }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="restaurant-info">
                    <h4><i class="fas fa-info-circle me-2"></i>Restaurant Info</h4>
                    <div class="row">
                        <div class="col-6">
                            <p><i class="fas fa-clock me-2"></i><strong>Hours:</strong><br>
                                {{ restaurant.hours|default:"10:00 AM - 11:00 PM" }}</p>
                        </div>
                        <div class="col-6">
                            <p><i class="fas fa-phone me-2"></i><strong>Phone:</strong><br>
                                {{ restaurant.phone|default:"(555) 123-4567" }}</p>
                        </div>
                    </div>
                    <p><i class="fas fa-map-marker-alt me-2"></i><strong>Address:</strong><br>
                        {{ restaurant.address|default:"123 Fine Dining Ave, Gourmet City, GC 12345" }}</p>
                </div>
            </div>
        </div>

        <!-- Restaurant Stats -->
        <div class="restaurant-stats">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-hand-holding-usd text-success"></i>
                </div>
                <h4>$12,450</h4>
                <p>Tips This Month</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-smile text-warning"></i>
                </div>
                <h4>98%</h4>
                <p>Happy Customers</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-award text-info"></i>
                </div>
                <h4>5 Years</h4>
                <p>Excellence Award</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-utensils text-danger"></i>
                </div>
                <h4>500+</h4>
                <p>Daily Customers</p>
            </div>
        </div>
    </div>
</section>

<!-- Waiters Section -->
<section class="py-5" style="background-color: #f8f9fa;">
    <div class="container">
        <!-- Search and Filter -->
        <div class="search-filter">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h2><i class="fas fa-users me-2 text-primary"></i>Our Amazing Staff</h2>
                    <p class="text-muted mb-0">Choose your server and show your appreciation</p>
                </div>
                <div class="col-md-6">
                    <div class="d-flex gap-2">
                        <input type="text" class="form-control" placeholder="Search staff by name..." id="staffSearch">
                        <select class="form-select" id="roleFilter">
                            <option value="">All Roles</option>
                            <option value="server">Servers</option>
                            <option value="bartender">Bartenders</option>
                            <option value="host">Hosts</option>
                            <option value="manager">Managers</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Waiters Grid -->
        {% if waiters %}
        <div class="waiter-grid" id="waitersGrid">
            {% for waiter in waiters %}
            <div class="waiter-card" data-role="{{ waiter.role|lower }}" data-name="{{ waiter.name|lower }}">
                <div class="waiter-photo"
                    style="background-image: url('{{ waiter.photo|default:'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80' }}');">
                </div>

                <h3 class="waiter-name">{{ waiter.name }}</h3>
                <p class="waiter-role">{{ waiter.role|default:"Server" }}</p>

                <div class="waiter-rating">
                    <div class="rating-stars">
                        {% for star in "12345" %}
                        {% if forloop.counter <= waiter.rating|default:5 %} <i class="fas fa-star"></i>
                            {% else %}
                            <i class="far fa-star"></i>
                            {% endif %}
                            {% endfor %}
                            <span class="ms-2 text-muted">({{ waiter.rating|default:"5.0" }})</span>
                    </div>
                </div>

                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter({{ waiter.id }}, 5)">
                        <i class="fas fa-dollar-sign me-1"></i>$5
                    </button>
                    <button class="btn tip-btn" onclick="tipWaiter({{ waiter.id }}, 10)">
                        <i class="fas fa-dollar-sign me-1"></i>$10
                    </button>
                    <button class="btn tip-btn" onclick="tipWaiter({{ waiter.id }}, 20)">
                        <i class="fas fa-dollar-sign me-1"></i>$20
                    </button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip({{ waiter.id }})">
                        <i class="fas fa-hand-holding-usd me-1"></i>Custom
                    </button>
                </div>

                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">{{ waiter.tips_received|default:"127" }}</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ waiter.years_experience|default:"3" }}y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ waiter.customers_served|default:"1.2k" }}</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <!-- Sample Waiters (for demonstration) -->
        <div class="waiter-grid" id="waitersGrid">
            <div class="waiter-card" data-role="server" data-name="alex johnson">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80');">
                </div>
                <h3 class="waiter-name">Alex Johnson</h3>
                <p class="waiter-role">Senior Server</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i>
                        <span class="ms-2 text-muted">(5.0)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(1, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(1, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(1, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(1)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">245</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">4y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">2.1k</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>

            <div class="waiter-card" data-role="bartender" data-name="sarah williams">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80');">
                </div>
                <h3 class="waiter-name">Sarah Williams</h3>
                <p class="waiter-role">Head Bartender</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i>
                        <span class="ms-2 text-muted">(4.9)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(2, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(2, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(2, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(2)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">189</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">6y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1.8k</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>

            <div class="waiter-card" data-role="server" data-name="mike chen">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80');">
                </div>
                <h3 class="waiter-name">Mike Chen</h3>
                <p class="waiter-role">Server</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="far fa-star"></i>
                        <span class="ms-2 text-muted">(4.7)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(3, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(3, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(3, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(3)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">156</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">2y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">980</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>

            <div class="waiter-card" data-role="host" data-name="emma davis">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80');">
                </div>
                <h3 class="waiter-name">Emma Davis</h3>
                <p class="waiter-role">Host & Manager</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i>
                        <span class="ms-2 text-muted">(4.8)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(4, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(4, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(4, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(4)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">203</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">5y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3.2k</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>

            <div class="waiter-card" data-role="server" data-name="james rodriguez">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80');">
                </div>
                <h3 class="waiter-name">James Rodriguez</h3>
                <p class="waiter-role">Server</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="far fa-star"></i>
                        <span class="ms-2 text-muted">(4.6)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(5, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(5, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(5, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(5)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">112</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">650</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>

            <div class="waiter-card" data-role="bartender" data-name="lisa thompson">
                <div class="waiter-photo"
                    style="background-image: url('https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=388&q=80');">
                </div>
                <h3 class="waiter-name">Lisa Thompson</h3>
                <p class="waiter-role">Bartender</p>
                <div class="waiter-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                            class="fas fa-star"></i><i class="fas fa-star"></i>
                        <span class="ms-2 text-muted">(4.9)</span>
                    </div>
                </div>
                <div class="tip-buttons">
                    <button class="btn tip-btn" onclick="tipWaiter(6, 5)"><i
                            class="fas fa-dollar-sign me-1"></i>$5</button>
                    <button class="btn tip-btn" onclick="tipWaiter(6, 10)"><i
                            class="fas fa-dollar-sign me-1"></i>$10</button>
                    <button class="btn tip-btn" onclick="tipWaiter(6, 20)"><i
                            class="fas fa-dollar-sign me-1"></i>$20</button>
                    <button class="btn tip-btn custom-tip-btn" onclick="customTip(6)"><i
                            class="fas fa-hand-holding-usd me-1"></i>Custom</button>
                </div>
                <div class="waiter-stats">
                    <div class="stat-item">
                        <div class="stat-number">167</div>
                        <div class="stat-label">Tips</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3y</div>
                        <div class="stat-label">Experience</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1.4k</div>
                        <div class="stat-label">Customers</div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- No Results Message -->
        <div class="no-waiters d-none" id="noResults">
            <i class="fas fa-search"></i>
            <h3>No staff members found</h3>
            <p class="text-muted">Try adjusting your search criteria or filter options.</p>
        </div>
    </div>
</section>
{% endblock %}